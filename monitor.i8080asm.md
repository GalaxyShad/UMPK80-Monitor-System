|  ADR | MC | LABEL  | ASM                        |                                                      COMMENT |
|------|----|--------|----------------------------|--------------------------------------------------------------|
|      | 00 |        |                            |  |
|      | 00 |        |                            | АДРЕСА УВВ МОДУЛЯ |
|      | 00 |        |                            |  |
|      | 00 | OTR    | EQU 4                      | РЕГИСТР ВЫВОДА НА МАГНИТАФОН, ЗВУК |
|      | 00 | ITR    | EQU 4                      | РЕГИСТР ВВОДА С МАГНИТАФОНА |
|      | 00 | LOUT   | EQU 5                      | ВЫХОДНОЙ РЕГИСТР |
|      | 00 | KEY    | EQU 6                      | РЕГИСТР ЧТЕНИЯ КЛАВИАТУРЫ |
|      | 00 | DSP    | EQU 6                      | РЕГИСТР СЕГМЕНТОВ ДИСПЛЕЯ |
|      | 00 | SCAN   | EQU 7                      | РЕГИСТР СКАНИРОВАНИЯ |
|      | 00 | CTL    | EQU 8                      | РЕГИСТР УПРАВЛЕНИЯ (БАЗОВЫЙ АДРЕС) |
|      | 00 |        |                            |  |
|      | 00 |        |                            | НАЗНАЧЕНИЕ КОНСТАНТ |
|      | 00 |        |                            |  |
|      | 00 | PC     | EQU 0800H                  | НАЧАЛЬНОЕ ЗНАЧЕНИЕ PC ПОЛЬЗОВАТЕЛЯ |
|      | 00 | TIME   | EQU 67H                    | КОНСТАНТА ЦИКЛА ЗАДЕРЖКИ В 1 МС |
|      | 00 | FREQ   | EQU 20H                    | КОНСТАНТА ЧАСТОТЫ BEEP |
|      | 00 | DUR    | EQU 40H                    | КОНСТАНТА ДЛИТЕЛЬНОСТИ BEEP |
|      | 00 | RS4C   | EQU 0AF6H                  | ТОЧКА ВЫХОДА ПО RST 4 |
|      | 00 | RS5C   | EQU 0AF9H                  | ТОЧКА ВЫХОДА ПО RST 5 |
|      | 00 | RS6C   | EQU 0AFCH                  | ТОЧКА ВЫХОДА ПО RST 6 |
|      | 00 | TPR    | EQU 0AFFH                  | ВЕРХ ЗАЩИЩЕННОГО ОЗУ |
|      | 00 | UR     | EQU 0AEFH                  | ВЕРХ ОЗУ (БЕЗ ТОЧЕК ВХОДА ПО RST) |
|      | 00 | ERAM   | EQU 0CH                    | КОНЕЦ ОЗУ |
|      | 00 | LMC    | EQU 06A0H                  | СТАРТОВАЯ МЕЛОДИЯ |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОБЛАСТИ СТЕКА МОНИТОРА И ПОЛЬЗОВАТЕЛЯ В ОЗУ |
|      | 00 |        |                            |  |
|      | 00 |        | ORG 0BB0H                  |  |
| 0BB0 | 00 | USP:   | DS 0                       | НАЧАЛЬНОЕ ЗНАЧЕНИЕ SP ПОЛЬЗОВАТЕЛЯ |
| 0BB0 | 00 |        | DS 1EH                     |  |
| 0BB1 | 00 |        |                            |  |
| 0BB2 | 00 |        |                            |  |
| 0BB3 | 00 |        |                            |  |
| 0BB4 | 00 |        |                            |  |
| 0BB5 | 00 |        |                            |  |
| 0BB6 | 00 |        |                            |  |
| 0BB7 | 00 |        |                            |  |
| 0BB8 | 00 |        |                            |  |
| 0BB9 | 00 |        |                            |  |
| 0BBA | 00 |        |                            |  |
| 0BBB | 00 |        |                            |  |
| 0BBC | 00 |        |                            |  |
| 0BBD | 00 |        |                            |  |
| 0BBE | 00 |        |                            |  |
| 0BBF | 00 |        |                            |  |
| 0BC0 | 00 |        |                            |  |
| 0BC1 | 00 |        |                            |  |
| 0BC2 | 00 |        |                            |  |
| 0BC3 | 00 |        |                            |  |
| 0BC4 | 00 |        |                            |  |
| 0BC5 | 00 |        |                            |  |
| 0BC6 | 00 |        |                            |  |
| 0BC7 | 00 |        |                            |  |
| 0BC8 | 00 |        |                            |  |
| 0BC9 | 00 |        |                            |  |
| 0BCA | 00 |        |                            |  |
| 0BCB | 00 |        |                            |  |
| 0BCC | 00 |        |                            |  |
| 0BCD | 00 |        |                            |  |
| 0BCE | 00 | MSP:   | DS 0                       | НАЧАЛЬНОЕ ЗНАЧЕНИЕ SP МОНИТОРА |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОБЛАСТЬ ПЕРЕМЕННЫХ МОНИТОРА В ОЗУ |
|      | 00 |        |                            |  |
|      | 00 |        | ORG 0BD1H                  |  |
| 0BD1 | 00 | TSAVS: | DS 2                       |  |
| 0BD2 | 00 |        |                            |  |
| 0BD3 | 00 | TSAVH: | DS 2                       |  |
| 0BD4 | 00 |        |                            |  |
| 0BD5 | 00 | RAML1: | DS 1                       |  |
| 0BD6 | 00 | RS:    | DS 1                       |  |
| 0BD7 | 00 | RAML2: | DS 4                       |  |
| 0BD8 | 00 |        |                            |  |
| 0BD9 | 00 |        |                            |  |
| 0BDA | 00 |        |                            |  |
| 0BDB | 00 | SAVRG: | DS 1                       |  |
| 0BDC | 00 | SAVPC: | DS 2                       |  |
| 0BDD | 00 |        |                            |  |
| 0BDE | 00 | SAVSL: | DS 1                       |  |
| 0BDF | 00 | SAVSH: | DS 1                       |  |
| 0BE0 | 00 | SAVL:  | DS 2                       |  |
| 0BE1 | 00 |        |                            |  |
| 0BE2 | 00 | SAVE:  | DS 2                       |  |
| 0BE3 | 00 |        |                            |  |
| 0BE4 | 00 | SAVC:  | DS 2                       |  |
| 0BE5 | 00 |        |                            |  |
| 0BE6 | 00 | SAVPW: | DS 1                       |  |
| 0BE7 | 00 | SAVA:  | DS 1                       |  |
| 0BE8 | 00 | UDKY:  | DS 8                       |  |
| 0BE9 | 00 |        |                            |  |
| 0BEA | 00 |        |                            |  |
| 0BEB | 00 |        |                            |  |
| 0BEC | 00 |        |                            |  |
| 0BED | 00 |        |                            |  |
| 0BEE | 00 |        |                            |  |
| 0BEF | 00 |        |                            |  |
| 0BF0 | 00 | UDSP:  | DS 6                       |  |
| 0BF1 | 00 |        |                            |  |
| 0BF2 | 00 |        |                            |  |
| 0BF3 | 00 |        |                            |  |
| 0BF4 | 00 |        |                            |  |
| 0BF5 | 00 |        |                            |  |
| 0BF6 | 00 | UDSP6: | DS 2                       |  |
| 0BF7 | 00 |        |                            |  |
| 0BF8 | 00 | RMP:   | DS 2                       |  |
| 0BF9 | 00 |        |                            |  |
| 0BFA | 00 | DDSP:  | DS 6                       |  |
| 0BFB | 00 |        |                            |  |
| 0BFC | 00 |        |                            |  |
| 0BFD | 00 |        |                            |  |
| 0BFE | 00 |        |                            |  |
| 0BFF | 00 |        |                            |  |
|      | 00 |        | ORG 0000H                  |  |
|      | 00 |        |                            | RST 0 - ТОЧКА ВХОДА В МОНИТОР ПО СБРОСУ |
|      | 00 |        |                            | ( КЛАВИША "R" ИЛИ ВКЛЮЧЕНИЕ ПИТАНИЯ ) |
|      | 00 |        |                            |  |
| 0000 | 26 | RESET: | MVI H,008H                 | АДРЕС НАЧАЛА ОЗУ |
| 0001 | 08 |        |                            |  |
| 0002 | AF |        | XRA A                      |  |
| 0003 | 2F |        | CMA                        |  |
| 0004 | 77 |        | MOV M,A                    | ЗАПИСЬ FF В ОДНУ ИЗ ЯЧЕЕК ОЗУ |
| 0005 | C3 |        | JMP STRT                   |  |
| 0006 | 40 |        |                            |  |
| 0007 | 00 |        |                            |  |
|      | 00 |        |                            | RST 1 - ТОЧКА ВХОДА В МОНИТОР ПО ПРЕРЫВАНИЮ |
|      | 00 |        |                            | ( КЛАВИША "СТ" ИЛИ ТОЧКА ОСТАНОВА ) |
|      | 00 |        |                            |  |
| 0008 | 22 | RS1:   | SHLD TSAVH                 |  |
| 0009 | D3 |        |                            |  |
| 000A | 0B |        |                            |  |
| 000B | D3 |        | OUT 008H                   |  |
| 000C | 08 |        |                            |  |
| 000D | C3 |        | JMP TRP                    |  |
| 000E | F3 |        |                            |  |
| 000F | 00 |        |                            |  |
|      | 00 |        |                            | RST 2 - СВИСТОК С ФИКСИРОВАННОЙ ДЛИТЕЛЬНОСЬЮ И ТОНОМ |
|      | 00 |        |                            |  |
| 0010 | 06 | BEEP:  | MVI B,FREQ                 | ЧАСТОТА СИГНАЛА |
| 0011 | 20 |        |                            |  |
| 0012 | 16 |        | MVI D,DUR                  | ДЛИТЕЛЬНОСТЬ СИГНАЛА |
| 0013 | 40 |        |                            |  |
| 0014 | C3 |        | JMP BEEP2                  |  |
| 0015 | 47 |        |                            |  |
| 0016 | 04 |        |                            |  |
| 0017 | 00 |        | NOP                        |  |
|      | 00 |        |                            | RST 3 - ПЕРЕМЕЩЕНИЕ СООБЩЕНИЯ ПО АДРЕСУ DE В ОБЛАСТЬ UDSP |
|      | 00 |        |                            |  |
| 0018 | C5 | STDM:  | PUSH B                     |  |
| 0019 | 21 |        | LXI H,UDSP                 | ПЕРВЫЙ СИМВОЛ В UDSP |
| 001A | F0 |        |                            |  |
| 001B | 0B |        |                            |  |
| 001C | C3 |        | JMP SDM                    |  |
| 001D | 35 |        |                            |  |
| 001E | 02 |        |                            |  |
| 001F | 00 |        | NOP                        |  |
| 0020 | C3 | RS4:   | JMP RS4C                   | ПЕРЕХОД НА П/П ПОЛЬЗОВАТЕЛЯ |
| 0021 | F6 |        |                            |  |
| 0022 | 0A |        |                            |  |
| 0023 | 00 |        | DB 0,0,0                   |  |
| 0024 | 00 |        |                            |  |
| 0025 | 00 |        |                            |  |
| 0026 | 00 |        | DB 0,0                     |  |
| 0027 | 00 |        |                            |  |
| 0028 | C3 | RS5:   | JMP RS5C                   | ПЕРЕХОД НА П/П ПОЛЬЗОВАТЕЛЯ |
| 0029 | F9 |        |                            |  |
| 002A | 0A |        |                            |  |
| 002B | 00 |        | DB 0,0,0                   |  |
| 002C | 00 |        |                            |  |
| 002D | 00 |        |                            |  |
| 002E | 00 |        | DB 0,0                     |  |
| 002F | 00 |        |                            |  |
| 0030 | C3 | RS6:   | JMP RS6C                   | ПЕРЕХОД НА П/П ПОЛЬЗОВАТЕЛЯ |
| 0031 | FC |        |                            |  |
| 0032 | 0A |        |                            |  |
| 0033 | 00 |        | DB 0,0,0                   |  |
| 0034 | 00 |        |                            |  |
| 0035 | 00 |        |                            |  |
| 0036 | 00 |        | DB 0,0                     |  |
| 0037 | 00 |        |                            |  |
| 0038 | D7 | RS7:   | RST 2                      | СВИСТОК |
| 0039 | C3 |        | JMP STRT6                  | ВОЗВРАТ В МОНИТОР |
| 003A | AC |        |                            |  |
| 003B | 00 |        |                            |  |
| 003C | 00 |        | DB 0,0,0                   |  |
| 003D | 00 |        |                            |  |
| 003E | 00 |        |                            |  |
| 003F | 00 |        | DB 0                       |  |
|      | 00 |        |                            | ТЕСТ САМОПРОВЕРКИ И НАЧАЛЬНАЯ |
|      | 00 |        |                            |  |
| 0040 | BE | STRT:  | CMP M                      | ЗАЩИТА ПАМЯТИ СНЯТА? |
| 0041 | C2 |        | JNZ PPER                   | - ЕСЛИ НЕТ (ПОПАЛИ НА RST 0 ИЗ-ЗА ОШИБКИ СТЕКА ПОЛЬЗОВАТЕЛЯ) |
| 0042 | C8 |        |                            |  |
| 0043 | 00 |        |                            |  |
| 0044 | 31 |        | LXI SP,MSP                 | ИНИЦИАЛИЗАЦИЯ СТЕКА МОНИТОРА |
| 0045 | CE |        |                            |  |
| 0046 | 0B |        |                            |  |
| 0047 | AF |        | XRA A                      |  |
| 0048 | 67 |        | MOV H,A                    |  |
| 0049 | 6F |        | MOV L,A                    |  |
| 004A | D3 |        | OUT LOUT                   |  |
| 004B | 05 |        |                            |  |
|      | 00 |        |                            | ТЕСТ ПЗУ МОДУЛЯ |
|      | 00 |        |                            |  |
| 004C | 86 | STRT1: | ADD M                      | ВЫЧИСЛЕНИЕ КОНТРОЛЬНОЙ СУММЫ ПЗУ |
| 004D | 23 |        | INX H                      |  |
| 004E | 4F |        | MOV C,A                    |  |
| 004F | 3E |        | MVI A,8H                   | ПЗУ КОНЧИЛОСЬ? |
| 0050 | 08 |        |                            |  |
| 0051 | BC |        | CMP H                      |  |
| 0052 | 79 |        | MOV A,C                    |  |
| 0053 | C2 |        | JNZ STRT1                  | - НЕТ, ПРОДОЛЖЕНИЕ ЦИКЛА |
| 0054 | 4C |        |                            |  |
| 0055 | 00 |        |                            |  |
| 0056 | 2B |        | DCX H                      | HL - НА ЗНАЧЕНИЕ КОНТРОЛЬНОЙ СУММЫ |
| 0057 | 96 |        | SUB M                      |  |
| 0058 | BE |        | CMP M                      |  |
| 0059 | 1E |        | MVI E,07CH                 | СООБЩИМ ОБ ОШИБКЕ |
| 005A | 7C |        |                            |  |
| 005B | 00 |        | DB 0,0,0                   | JNZ MERR1 - ПЕРЕХОД НА ЕЕ ИНДИКАЦИЮ |
| 005C | 00 |        |                            |  |
| 005D | 00 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ТЕСТ ОЗУ МОДУЛЯ |
|      | 00 |        |                            |  |
| 005E | AF |        | XRA A                      | ОЧИСТИМ А |
| 005F | 21 |        | LXI H,PC                   | HL НА НАЧАЛО ОЗУ |
| 0060 | 00 |        |                            |  |
| 0061 | 08 |        |                            |  |
| 0062 | 06 |        | MVI B,3                    | ПОСТОЯННОЕ СЛАГАЕМОЕ |
| 0063 | 03 |        |                            |  |
| 0064 | 77 | STRT2: | MOV M,A                    | ЗАПОМНИМ В ПАМЯТИ |
| 0065 | 80 |        | ADD B                      | УВЕЛИЧИМ А НА 3 |
| 0066 | 23 |        | INX H                      | НА СЛЕДУЮЩИЙ АДРЕС ОЗУ |
| 0067 | 4F |        | MOV C,A                    |  |
| 0068 | 7C |        | MOV A,H                    |  |
| 0069 | FE |        | CPI ERAM                   | ОЗУ КОНЧИЛОСЬ? |
| 006A | 0C |        |                            |  |
| 006B | 79 |        | MOV A,C                    |  |
| 006C | C2 |        | JNZ STRT2                  | - НЕТ, ПРОДОЛЖИМ ЗАПИСЬ |
| 006D | 64 |        |                            |  |
| 006E | 00 |        |                            |  |
| 006F | AF |        | XRA A                      |  |
| 0070 | 21 |        | LXI H,PC                   | HL НА НАЧАЛО ПАМЯТИ |
| 0071 | 00 |        |                            |  |
| 0072 | 08 |        |                            |  |
| 0073 | BE | STRT3: | CMP M                      | ДАННЫЕ ЗАПИСАЛИСЬ ПРАВИЛЬНО? |
| 0074 | C2 |        | JNZ MERR                   | - ЕСЛИ БЫЛА ОШИБКА |
| 0075 | DC |        |                            |  |
| 0076 | 00 |        |                            |  |
| 0077 | 2F |        | CMA                        |  |
| 0078 | 77 |        | MOV M,A                    | ЗАПИШЕМ ИНВЕРТИРОВАННЫЙ БАЙТ |
| 0079 | BE |        | CMP M                      | ОН ЗАПИСАЛСЯ ПРАВИЛЬНО? |
| 007A | C2 |        | JNZ MERR                   | - БЫЛА ОШИБКА |
| 007B | DC |        |                            |  |
| 007C | 00 |        |                            |  |
| 007D | 2F |        | CMA                        | НАЧАЛЬНОЕ ЗНАЧЕНИЕ А |
| 007E | 80 |        | ADD B                      |  |
| 007F | 23 |        | INX H                      | СЛЕДУЮЩИЙ АДРЕС ПАМЯТИ |
| 0080 | 4F |        | MOV C,A                    |  |
| 0081 | 7C |        | MOV A,H                    |  |
| 0082 | FE |        | CPI ERAM                   | ДОШЛИ ДО КОНЦА ОЗУ? |
| 0083 | 0C |        |                            |  |
| 0084 | 79 |        | MOV A,C                    |  |
| 0085 | C2 |        | JNZ STRT3                  | НЕТ - ПРОДОЛЖИМ ПРОВЕРКУ |
| 0086 | 73 |        |                            |  |
| 0087 | 00 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ТЕСТ ДИСПЛЕЙ МОДУЛЯ |
|      | 00 |        |                            |  |
| 0088 | 06 |        | MVI B,080H                 | СЧЕТЧИК ЦИКЛА |
| 0089 | 80 |        |                            |  |
| 008A | 11 | STRT4: | LXI D,ALL                  | СООБЩЕНИЕ "ВСЕ СЕГМЕНТЫ" |
| 008B | 81 |        |                            |  |
| 008C | 02 |        |                            |  |
| 008D | DF |        | RST 3                      | СКОПИРУЕМ ЕГО В ОБЛАСТЬ ДИСПЛЕЯ |
| 008E | CD |        | CALL DCD                   | И ОТОБРАЗИМ |
| 008F | E9 |        |                            |  |
| 0090 | 01 |        |                            |  |
| 0091 | 05 |        | DCR B                      | ЦИКЛ КОНЧИЛСЯ? |
| 0092 | C2 |        | JNZ STRT4                  | НЕТ, ПРОДОЛЖАЕМ |
| 0093 | 8A |        |                            |  |
| 0094 | 00 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОЧИСТКА ПАМЯТИ (ЗАПОЛНЕНИЕ НУЛЯМИ) |
|      | 00 |        |                            |  |
| 0095 | 06 |        | MVI B,0                    |  |
| 0096 | 00 |        |                            |  |
| 0097 | 3E |        | MVI A,ERAM                 | СТАРШИЙ БАЙТ АДРЕСА ВЕРХУШКИ ОЗУ |
| 0098 | 0C |        |                            |  |
| 0099 | 21 |        | LXI H,PC                   | HL - НА НАЧАЛО ОЗУ |
| 009A | 00 |        |                            |  |
| 009B | 08 |        |                            |  |
| 009C | 70 | STRT5: | MOV M,B                    | ОЧИСТИМ ЯЧЕЙКУ ПАМЯТИ |
| 009D | 23 |        | INX H                      |  |
| 009E | BC |        | CMP H                      |  |
| 009F | C2 |        | JNZ STRT5                  | ПОКА НЕ ДОЙДЕМ ДО ВЕРХУШКИ ОЗУ |
| 00A0 | 9C |        |                            |  |
| 00A1 | 00 |        |                            |  |
| 00A2 | 3E |        | MVI A,0FFH                 |  |
| 00A3 | FF |        |                            |  |
| 00A4 | D3 |        | OUT LOUT                   | ВКЛЮЧИМ СВЕТОДИОДЫ ВЕРХНЕГО РГ |
| 00A5 | 05 |        |                            |  |
| 00A6 | CD |        | CALL LMC                   | СЫГРАЕМ МУЗЫКУ |
| 00A7 | A0 |        |                            |  |
| 00A8 | 06 |        |                            |  |
| 00A9 | AF |        | XRA A                      |  |
| 00AA | D3 |        | OUT LOUT                   | ВЫКЛЮЧИМ СВЕТОДИОДЫ (ОЧИСТИМ LOUT) |
| 00AB | 05 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ИНИЦИАЛИЗАЦИЯ ПЕРЕМЕННЫХ МОНИТОРА |
|      | 00 |        |                            |  |
| 00AC | 21 | STRT6: | LXI H,USP                  | СТЕК ПОЛЬЗОВАТЕЛЯ |
| 00AD | B0 |        |                            |  |
| 00AE | 0B |        |                            |  |
| 00AF | 22 |        | SHLD SAVSL                 |  |
| 00B0 | DE |        |                            |  |
| 00B1 | 0B |        |                            |  |
| 00B2 | 21 |        | LXI H,RS                   | АДРЕС СОСТОЯНИЯ |
| 00B3 | D6 |        |                            |  |
| 00B4 | 0B |        |                            |  |
| 00B5 | 36 |        | MVI M,0                    | УСТАНОВИМ СОСТОЯНИЕ "МОНИТОР" |
| 00B6 | 00 |        |                            |  |
| 00B7 | 21 |        | LXI H,PC                   | НАЧАЛО ОЗУ |
| 00B8 | 00 |        |                            |  |
| 00B9 | 08 |        |                            |  |
| 00BA | 22 |        | SHLD SAVPC                 | НАЧАЛО ПРОГРАММЫ ПОЛЬЗОВАТЕЛЯ |
| 00BB | DC |        |                            |  |
| 00BC | 0B |        |                            |  |
|      | 00 |        |                            | ПО УМОЛЧАНИЮ |
| 00BD | 3E |        | MVI A,0FFH                 | КОД RST7 |
| 00BE | FF |        |                            |  |
| 00BF | 32 |        | STA TPR                    | ЗАПОМНИМ ЕГО ОЗУ |
| 00C0 | FF |        |                            |  |
| 00C1 | 0A |        |                            |  |
| 00C2 | 32 |        | STA UR                     |  |
| 00C3 | EF |        |                            |  |
| 00C4 | 0A |        |                            |  |
| 00C5 | C3 |        | JMP TRP3                   | ПЕРЕЙДЕМ НА МОНИТОР |
| 00C6 | 11 |        |                            |  |
| 00C7 | 01 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОБРАБОТКА ОШИБОК СТЕКА |
|      | 00 |        |                            |  |
| 00C8 | 31 | PPER:  | LXI SP,MSP                 | СТЕК МОНИТОРА |
| 00C9 | CE |        |                            |  |
| 00CA | 0B |        |                            |  |
| 00CB | 21 |        | LXI H,PC                   | СЧЕТЧИК КОМАНД ПО УМОЛЧАНИЮ |
| 00CC | 00 |        |                            |  |
| 00CD | 08 |        |                            |  |
| 00CE | 22 |        | SHLD SAVPC                 | ЗАПОМНИМ ЕГО |
| 00CF | DC |        |                            |  |
| 00D0 | 0B |        |                            |  |
| 00D1 | D7 |        | RST 2                      | СИГНАЛ ОШИБКИ |
| 00D2 | AF |        | XRA A                      |  |
| 00D3 | 32 |        | STA RS                     | СОСТОЯНИЕ "МОНИТОР" |
| 00D4 | D6 |        |                            |  |
| 00D5 | 0B |        |                            |  |
| 00D6 | 11 |        | LXI D,PPM                  | УКАЗАТЬ НА ОШИБКУ РАБОТЫ СО СТЕКОМ |
| 00D7 | 8D |        |                            |  |
| 00D8 | 02 |        |                            |  |
| 00D9 | C3 |        | JMP TRP4                   |  |
| 00DA | 15 |        |                            |  |
| 00DB | 01 |        |                            |  |
|      | 00 |        |                            | ИНДИКАЦИЯ ОШИБОК ЗУ |
|      | 00 |        |                            |  |
| 00DC | 1E | MERR:  | MVI E,87H                  | АДРЕС СООБЩЕНИЯ ОБ ОШИБКЕ ОЗУ |
| 00DD | 87 |        |                            |  |
| 00DE | 16 |        | MVI D,2                    |  |
| 00DF | 02 |        |                            |  |
| 00E0 | DF |        | RST 3                      | ПЕРЕМЕСТИМ ЕГО В ОБЛАСТИ ДИСПЛЕЯ |
| 00E1 | 21 |        | LXI H,UDSP+5               |  |
| 00E2 | F5 |        |                            |  |
| 00E3 | 0B |        |                            |  |
| 00E4 | 36 |        | MVI M,10H                  |  |
| 00E5 | 10 |        |                            |  |
| 00E6 | D7 | MERR2: | RST 2                      | БУДЕМ СВИСТЕТЬ |
| 00E7 | 06 |        | MVI B,70H                  |  |
| 00E8 | 70 |        |                            |  |
| 00E9 | CD | MERR3: | CALL DCD                   | И ВЫВОДИТЬ СООБЩЕНИЕ |
| 00EA | E9 |        |                            |  |
| 00EB | 01 |        |                            |  |
| 00EC | 05 |        | DCR B                      |  |
| 00ED | C2 |        | JNZ MERR3                  |  |
| 00EE | E9 |        |                            |  |
| 00EF | 00 |        |                            |  |
| 00F0 | C3 |        | JMP MERR2                  |  |
| 00F1 | E6 |        |                            |  |
| 00F2 | 00 |        |                            |  |
|      | 00 |        |                            | RST 1 - ГЛАВНАЯ ТОЧКА ВХОДА В МОНИТОР |
|      | 00 |        |                            |  |
| 00F3 | 21 | TRP:   | LXI H,0                    | ИЗВЛЕКАЕМ SP ПОЛЬЗОВАТЕЛЯ, |
| 00F4 | 00 |        |                            |  |
| 00F5 | 00 |        |                            |  |
| 00F6 | D2 |        | JNC TRP1                   | СОХРАНИВ ЕГО ФЛАГ CY |
| 00F7 | FA |        |                            |  |
| 00F8 | 00 |        |                            |  |
| 00F9 | 2B |        | DCX H                      |  |
| 00FA | 39 | TRP1:  | DAD SP                     |  |
| 00FB | D2 |        | JNC TRP2                   |  |
| 00FC | FF |        |                            |  |
| 00FD | 00 |        |                            |  |
| 00FE | 23 |        | INX H                      |  |
| 00FF | 22 | TRP2:  | SHLD TSAVS                 | СОХРАНИМ SP ПОЛЬЗОВАТЕЛЯ |
| 0100 | D1 |        |                            |  |
| 0101 | 0B |        |                            |  |
| 0102 | 31 |        | LXI SP,TSAVS               | АДРЕС ОБЛАСТИ СОХРАНЕНИЯ PSW |
| 0103 | D1 |        |                            |  |
| 0104 | 0B |        |                            |  |
| 0105 | F5 |        | PUSH PSW                   |  |
| 0106 | 21 |        | LXI H,RS                   | АДРЕС ПРИЗНАКА СОСТОЯНИЯ |
| 0107 | D6 |        |                            |  |
| 0108 | 0B |        |                            |  |
| 0109 | AF |        | XRA A                      |  |
| 010A | BE |        | CMP M                      | СОСТОЯНИЕ "МОНИТОР" |
| 010B | 32 |        | STA UDSP6                  | ОЧИЩАЕМ ПРИЗНАК МОДИФИКАЦИИ ДАННЫХ |
| 010C | F6 |        |                            |  |
| 010D | 0B |        |                            |  |
| 010E | C2 |        | JNZ TRP6                   | - ЕСЛИ ПРИШЛИ ИЗ ПРОГРАММЫ ПОЛЬЗОВ. |
| 010F | 24 |        |                            |  |
| 0110 | 01 |        |                            |  |
| 0111 | 11 | TRP3:  | LXI D,DMT                  | СООБЩЕНИЕ "НАЧАЛО" |
| 0112 | 41 |        |                            |  |
| 0113 | 02 |        |                            |  |
| 0114 | FB |        | EI                         |  |
| 0115 | AF | TRP4:  | XRA A                      |  |
| 0116 | D3 |        | OUT LOUT                   | ОЧИСТИМ ВЫХОДНОЙ РЕГИСТР |
| 0117 | 05 |        |                            |  |
| 0118 | D3 |        | OUT CTL                    | СНИМЕМ ЗАЩИТУ ОЗУ |
| 0119 | 08 |        |                            |  |
| 011A | DF |        | RST 3                      | СООБЩЕНИЕ - В ОБЛАСТЬ ДИСПЛЕЯ |
| 011B | CD | TRP5:  | CALL KIND                  | ВВЕДЕМ КЛАВИШУ |
| 011C | 4B |        |                            |  |
| 011D | 01 |        |                            |  |
| 011E | CD |        | CALL CFETA                 | ОПРЕДЕЛЕНИЕ ЖОСТУПНЫХ КЛАВИШ |
| 011F | B8 |        |                            |  |
| 0120 | 02 |        |                            |  |
| 0121 | C3 |        | JMP TRP5                   |  |
| 0122 | 1B |        |                            |  |
| 0123 | 01 |        |                            |  |
| 0124 | 77 | TRP6:  | MOV M,A                    | УСТАНОВИМ СОСТОЯНИЕ "МОНИТОР" |
|      | 00 |        |                            |  |
|      | 00 |        |                            | СОХРАНЕНИЕ РЕГИСТРОВ ПОЛЬЗОВАТЕЛЯ |
|      | 00 |        |                            |  |
| 0125 | F1 |        | POP PSW                    |  |
| 0126 | E1 |        | POP H                      | ЗАПИСАТЬ ТЕКУЩЕЕ ЗНАЧЕНИЕ SP В HL |
| 0127 | 23 |        | INX H                      |  |
| 0128 | 23 |        | INX H                      |  |
| 0129 | 22 |        | SHLD SAVSL                 | СОХРАНИТЬ ЕГО В ОЗУ |
| 012A | DE |        |                            |  |
| 012B | 0B |        |                            |  |
| 012C | 2B |        | DCX H                      |  |
| 012D | 2B |        | DCX H                      |  |
| 012E | F9 |        | SPHL                       | ВОССТАНОВИТЬ SP ПОЛЬЗОВАТЕЛЯ |
| 012F | E1 |        | POP H                      | АДРЕС ВОЗВРАТА К ПРОГРАММЕ ПОЛЬЗОВ. |
| 0130 | 22 |        | SHLD SAVPC                 | СОХРАНИМ ЕГО В ОЗУ |
| 0131 | DC |        |                            |  |
| 0132 | 0B |        |                            |  |
| 0133 | 31 |        | LXI SP,0BE8H               | АДРЕС СОХРАНЕНИЯ РЕГИСТРОВ |
| 0134 | E8 |        |                            |  |
| 0135 | 0B |        |                            |  |
| 0136 | 2A |        | LHLD TSAVH                 | ВОССТАНОВИТЬ HL |
| 0137 | D3 |        |                            |  |
| 0138 | 0B |        |                            |  |
| 0139 | F5 |        | PUSH PSW                   | СОХРАНИМ РЕГИСТРЫ ПОЛЬЗОВАТЕЛЯ |
| 013A | C5 |        | PUSH B                     |  |
| 013B | D5 |        | PUSH D                     |  |
| 013C | E5 |        | PUSH H                     |  |
| 013D | 00 |        | NOP                        |  |
| 013E | 00 |        | NOP                        |  |
| 013F | 00 |        | NOP                        |  |
| 0140 | FB |        | EI                         |  |
| 0141 | 31 | TRP7:  | LXI SP,SAVPC               |  |
| 0142 | DC |        |                            |  |
| 0143 | 0B |        |                            |  |
| 0144 | C1 |        | POP B                      |  |
| 0145 | 31 |        | LXI SP,MSP                 | ВОССТАНОВИТЬ SP МОНИТОРА |
| 0146 | CE |        |                            |  |
| 0147 | 0B |        |                            |  |
| 0148 | C3 |        | JMP FETA3                  |  |
| 0149 | 54 |        |                            |  |
| 014A | 03 |        |                            |  |
|      | 00 |        |                            | ВВОД И ОПРЕДЕНИЕ КОДА НАЖАТОЙ КЛАВИШИ |
|      | 00 |        |                            |  |
| 014B | D5 | KIND:  | PUSH D                     |  |
| 014C | E5 |        | PUSH H                     |  |
| 014D | CD | KIND1: | CALL DCD                   | ВЫДАТЬ СООБЩЕНИЕ НА ДИСПЛЕЙ |
| 014E | E9 |        |                            |  |
| 014F | 01 |        |                            |  |
| 0150 | CD |        | CALL KPU                   | КЛАВИША НАЖАТА? |
| 0151 | 85 |        |                            |  |
| 0152 | 01 |        |                            |  |
| 0153 | C2 |        | JNZ KIND1                  | ДА, ПОДОЖДЕМ ПОКА НЕ ОТПУСТЯТ |
| 0154 | 4D |        |                            |  |
| 0155 | 01 |        |                            |  |
| 0156 | CD | KIND2: | CALL DCD                   | ВЫДАТЬ СООБЩЕНИЕ НА ДИСПЛЕЙ |
| 0157 | E9 |        |                            |  |
| 0158 | 01 |        |                            |  |
| 0159 | CD |        | CALL KPU                   |  |
| 015A | 85 |        |                            |  |
| 015B | 01 |        |                            |  |
| 015C | CA |        | JZ KIND2                   | ЕСЛИ НЕТ НАЖАТОЙ КЛАВИШИ - ЖДАТЬ |
| 015D | 56 |        |                            |  |
| 015E | 01 |        |                            |  |
| 015F | 21 |        | LXI H,UDKY                 | АДРЕС ОБРАЗА 0 СТРОКИ КЛАВИАТУРЫ |
| 0160 | E8 |        |                            |  |
| 0161 | 0B |        |                            |  |
| 0162 | 16 |        | MVI D,0FFH                 | СЧЕТЧИК СТРОК = -1 |
| 0163 | FF |        |                            |  |
| 0164 | 7E | KIND3: | MOV A,M                    | ПОЛУЧИМ ОБРАЗ ТЕКУЩЕЙ СТРОКИ |
| 0165 | FE |        | CPI 0F7H                   | КЛАВИША "ШАГ МАШИННОГО ЦИКЛА"? |
| 0166 | F7 |        |                            |  |
| 0167 | CA |        | JZ KIND5                   | ДА, ПЕРЕЙДЕМ |
| 0168 | 82 |        |                            |  |
| 0169 | 01 |        |                            |  |
| 016A | 2F |        | CMA                        |  |
| 016B | 2C |        | INR L                      | СЛЕДУЮЩАЯ СТРОКА |
| 016C | 14 |        | INR D                      | СЛЕДУЮЩИЙ БЛОК ТАБЛИЦЫ СООТВЕТСТВИЯ |
| 016D | A7 |        | ANA A                      | ЕСТЬ КЛАВИША В ЭТОЙ СТРОКЕ? |
| 016E | CA |        | JZ KIND3                   | НЕТ, ПЕРЕЙДЕМ НА СЛЕДУЮЩУЮ |
| 016F | 64 |        |                            |  |
| 0170 | 01 |        |                            |  |
| 0171 | FE |        | CPI 4                      |  |
| 0172 | 04 |        |                            |  |
| 0173 | C2 |        | JNZ KIND4                  |  |
| 0174 | 77 |        |                            |  |
| 0175 | 01 |        |                            |  |
| 0176 | 3D |        | DCR A                      | УСТАНОВИМ А = 3, ЕСЛИ БЫЛО А = 4 |
| 0177 | 82 | KIND4: | ADD D                      | ПРИБАВИМ ТРИ РАЗА НОМЕР СТРОКИ ДЛЯ |
| 0178 | 82 |        | ADD D                      | ПОЛУЧЕНИЯ СМЕЩЕНИЯ В ТАБЛИЦЕ |
| 0179 | 82 |        | ADD D                      |  |
| 017A | 5F |        | MOV E,A                    | ЗАПОМНИМ ИНДЕКС ТАБЛ. СООТВЕТСТВИЯ |
| 017B | 16 |        | MVI D,0                    |  |
| 017C | 00 |        |                            |  |
| 017D | 21 |        | LXI H,KIT-1                | НАЧАЛЬНЫЙ АДРЕС ТАБЛИЦЫ СООТВ |
| 017E | AF |        |                            |  |
| 017F | 01 |        |                            |  |
| 0180 | 19 |        | DAD D                      | АДРЕС КОДА НАЖАТОЙ КЛАВИШИ |
| 0181 | 7E |        | MOV A,M                    | ПОЛУЧИМ ЕЕ КОД |
| 0182 | E1 | KIND5: | POP H                      |  |
| 0183 | D1 |        | POP D                      |  |
| 0184 | C9 |        | RET                        |  |
|      | 00 |        |                            | ОПРЕДЕЛЕНИЕ ФАКТА НАЖАТИЯ КАКОЙ-ЛИБО КЛАВИШИ |
|      | 00 |        |                            |  |
| 0185 | C5 | KPU:   | PUSH B                     |  |
| 0186 | CD |        | CALL KRD                   | СЧИТАЕМ КЛАВИАТУРУ |
| 0187 | 9A |        |                            |  |
| 0188 | 01 |        |                            |  |
| 0189 | 06 |        | MVI B,8                    | ЧИСЛО СТРОК КЛАВИАТУРЫ |
| 018A | 08 |        |                            |  |
| 018B | 21 |        | LXI H,UDKY                 | ОБЛАСТЬ ЗАПИСИ ОБРАЗА КЛАВИАТУРЫ |
| 018C | E8 |        |                            |  |
| 018D | 0B |        |                            |  |
| 018E | 3E |        | MVI A,0FFH                 |  |
| 018F | FF |        |                            |  |
| 0190 | A6 | KPU1:  | ANA M                      | ЕСТЬ ЛИ НАЖАТАЯ КЛАВИША? |
| 0191 | 2C |        | INR L                      |  |
| 0192 | 05 |        | DCR B                      |  |
| 0193 | C2 |        | JNZ KPU1                   | ПРОВЕРЯЕМ ВСЕ СТРОКИ КЛАВИАТУРЫ |
| 0194 | 90 |        |                            |  |
| 0195 | 01 |        |                            |  |
| 0196 | FE |        | CPI 0FFH                   | ПРИЗНАК Z = 0, ЕСЛИ НЕТ НАЖАТЫХ КЛАВИШ |
| 0197 | FF |        |                            |  |
| 0198 | C1 |        | POP B                      |  |
| 0199 | C9 |        | RET                        |  |
|      | 00 |        |                            | ЧТЕНИЕ КЛАВИАТУРЫ И ЗАПОМИНАНИЕ ЕЁ ОБРАЗА В ОЗУ (UDKY) |
|      | 00 |        |                            |  |
| 019A | 21 | KRD:   | LXI H,UDKY                 | ОБЛАСТЬ ЗАПИСИ ОБРАЗА КЛАВИАТУРЫ |
| 019B | E8 |        |                            |  |
| 019C | 0B |        |                            |  |
| 019D | AF |        | XRA A                      |  |
| 019E | D3 |        | OUT DSP                    | ОЧИСТИМ ДИСПЛЕЙ |
| 019F | 06 |        |                            |  |
| 01A0 | 2F |        | CMA                        |  |
| 01A1 | 3D |        | DCR A                      | 11111110 В - УКАЗАТЕЛЬ СКАНИРОВАНИЯ |
| 01A2 | 37 |        | STC                        |  |
| 01A3 | D3 | KRD1:  | OUT SCAN                   | ВЫБЕРЕМ ОДНУ СТРОКУ |
| 01A4 | 07 |        |                            |  |
| 01A5 | 47 |        | MOV B,A                    |  |
| 01A6 | DB |        | IN KEY                     | ВВОДИМ ВЫБРАННУЮ СТРОКУ |
| 01A7 | 06 |        |                            |  |
| 01A8 | 77 |        | MOV M,A                    |  |
| 01A9 | 78 |        | MOV A,B                    |  |
| 01AA | 2C |        | INR L                      | АДРЕС СЛЕДУЮЩЕЙ СТРОКИ |
| 01AB | 17 |        | RAL                        | УКАЗАТЕЛЬ - НА СЛЕДУЮЩУЮ СТРОКУ |
| 01AC | DA |        | JC KRD1                    | ПОВТОРИМ ЕСЛИ НЕ КОНЧИЛИ |
| 01AD | A3 |        |                            |  |
| 01AE | 01 |        |                            |  |
| 01AF | C9 |        | RET                        |  |
|      | 00 |        |                            | ТАБЛИЦА ОПРЕДЕЛЕНИЯ КОДОВ КЛАВИШ |
|      | 00 |        |                            |  |
| 01B0 | 86 | KIT:   | DB 86H                     | ШАГ КОМАНДЫ |
| 01B1 | 85 |        | DB 85H                     | ПРОГРАММНЫЙ СЧЕТЧИК |
| 01B2 | 00 |        | DB 0                       | НЕ ИСПОЛЬЗУЕТСЯ |
| 01B3 | 84 |        | DB 84H                     | ПУСК |
| 01B4 | 80 |        | DB 80H                     | ОТЫСКАНИЕ РЕГИСТРА |
| 01B5 | 82 |        | DB 82H                     | ОТЫСКАНИЕ АДРЕСА |
| 01B6 | 00 |        | DB 0                       | 0 |
| 01B7 | 83 |        | DB 83H                     | ЗАПИСАТЬ / УВЕЛИЧИТЬ |
| 01B8 | 81 |        | DB 81H                     | УМЕНЬШИТЬ |
| 01B9 | 01 |        | DB 1                       | 1 |
| 01BA | 02 |        | DB 2                       | 2 |
| 01BB | 03 |        | DB 3                       | 3 |
| 01BC | 04 |        | DB 4                       | 4 |
| 01BD | 05 |        | DB 5                       | 5 |
| 01BE | 06 |        | DB 6                       | 6 |
| 01BF | 07 |        | DB 7                       | 7 |
| 01C0 | 08 |        | DB 8                       | 8 |
| 01C1 | 09 |        | DB 9                       | 9 |
| 01C2 | 0A |        | DB 0AH                     | A |
| 01C3 | 0B |        | DB 0BH                     | B |
| 01C4 | 0C |        | DB 0CH                     | C |
| 01C5 | 0D |        | DB 0DH                     | D |
| 01C6 | 0E |        | DB 0EH                     | E |
| 01C7 | 0F |        | DB 0FH                     | F |
|      | 00 |        |                            |  |
|      | 00 |        |                            | СКАНИРОВАНИЕ ДИСПЛЕЯ (ОДИН РАЗ) |
|      | 00 |        |                            |  |
| 01C8 | F5 | SDS:   | PUSH PSW                   |  |
| 01C9 | E5 |        | PUSH H                     |  |
| 01CA | C5 |        | PUSH B                     |  |
| 01CB | 21 |        | LXI H,DDSP+5               | АДРЕС ПОСЛЕДНЕГО СИМВОЛА |
| 01CC | FF |        |                            |  |
| 01CD | 0B |        |                            |  |
| 01CE | 06 |        | MVI B,20H                  | УКАЗАТЕЛЬ - НА ПЯТЫЙ СИМВОЛ |
| 01CF | 20 |        |                            |  |
| 01D0 | AF | SDS1:  | XRA A                      |  |
| 01D1 | D3 |        | OUT SCAN                   | ПОГАСИМ ДИСПЛЕЙ |
| 01D2 | 07 |        |                            |  |
| 01D3 | 7E |        | MOV A,M                    | КОД ОТОБРАЖАЕМОГО СИМВОЛА |
| 01D4 | D3 |        | OUT DSP                    | ЗАПИСЫВАЕМ В РЕГИСТР СЕГМЕНТОВ |
| 01D5 | 06 |        |                            |  |
| 01D6 | 78 |        | MOV A,B                    |  |
| 01D7 | D3 |        | OUT SCAN                   | И ВКЛЮЧАЕМ НУЖНЫЙ ИНДИКАТОР |
| 01D8 | 07 |        |                            |  |
| 01D9 | CD |        | CALL DELA                  | ЗАДЕРЖКА 1 МС |
| 01DA | 29 |        |                            |  |
| 01DB | 04 |        |                            |  |
| 01DC | 2D |        | DCR L                      | АДРЕС КОДА СЛЕДУЮЩЕГО СИМВОЛА |
| 01DD | 1F |        | RAR                        | УКАЗАТЕЛЬ - НА СЛЕДУЮЩИЙ СИМВОЛ |
| 01DE | 47 |        | MOV B,A                    |  |
| 01DF | D2 |        | JNC SDS1                   | ОТОБРАЖАЕМ 6 СИМВОЛОВ |
| 01E0 | D0 |        |                            |  |
| 01E1 | 01 |        |                            |  |
| 01E2 | AF |        | XRA A                      |  |
| 01E3 | D3 |        | OUT DSP                    | ГАСИМ ДИСПЛЕЙ |
| 01E4 | 06 |        |                            |  |
| 01E5 | C1 |        | POP B                      |  |
| 01E6 | E1 |        | POP H                      |  |
| 01E7 | F1 |        | POP PSW                    |  |
| 01E8 | C9 |        | RET                        |  |
|      | 00 |        |                            | ДЕКОДИРОВАНИЕ ВЫВОДИМОГО СИМВОЛА |
|      | 00 |        |                            |  |
| 01E9 | F5 | DCD:   | PUSH PSW                   |  |
| 01EA | C5 |        | PUSH B                     |  |
| 01EB | D5 |        | PUSH D                     |  |
| 01EC | E5 |        | PUSH H                     |  |
| 01ED | 01 |        | LXI B,DDSP                 | ОБЛАСТЬ ДЕКОДИРОВАННЫХ СИМВОЛОВ |
| 01EE | FA |        |                            |  |
| 01EF | 0B |        |                            |  |
| 01F0 | 11 |        | LXI D,UDSP                 | ОБЛАСТЬ НЕДЕКОДИРОВАННЫХ СИМВОЛОВ |
| 01F1 | F0 |        |                            |  |
| 01F2 | 0B |        |                            |  |
| 01F3 | 21 | DCD1:  | LXI H,DCC                  | ТАБЛИЦА ДЕКОДИРОВАНИЯ СИМВОЛОВ |
| 01F4 | 18 |        |                            |  |
| 01F5 | 02 |        |                            |  |
| 01F6 | 1A |        | LDAX D                     | ПО СМЕЩЕНИЮ В ТАБЛИЦЕ ПОЛУЧИМ КОД |
| 01F7 | D5 |        | PUSH D                     |  |
| 01F8 | 5F |        | MOV E,A                    |  |
| 01F9 | 16 |        | MVI D,0                    |  |
| 01FA | 00 |        |                            |  |
| 01FB | 19 |        | DAD D                      |  |
| 01FC | 7E |        | MOV A,M                    |  |
| 01FD | 02 |        | STAX B                     | ЗАПОМНИМ ЕГО |
| 01FE | D1 |        | POP D                      |  |
| 01FF | 1C |        | INR E                      |  |
| 0200 | 0C |        | INR C                      |  |
| 0201 | C2 |        | JNZ DCD1                   | НЕ ПОСЛЕДНИЙ СИМВОЛ - ПЕРЕЙДЕМ |
| 0202 | F3 |        |                            |  |
| 0203 | 01 |        |                            |  |
| 0204 | 21 |        | LXI H,DDSP                 | ПЕРВЫЙ ДЕКОДИРОВАННЫЙ СИМВОЛ |
| 0205 | FA |        |                            |  |
| 0206 | 0B |        |                            |  |
| 0207 | 1A |        | LDAX D                     | АДРЕС ПРИЗНАКА МОДИФИКАЦИИ ДАННЫХ |
| 0208 | A7 |        | ANA A                      |  |
| 0209 | CA |        | JZ DCD2                    |  |
| 020A | 10 |        |                            |  |
| 020B | 02 |        |                            |  |
| 020C | 7E |        | MOV A,M                    |  |
| 020D | F6 |        | ORI 080H                   | ЕСЛИ ПРИЗНАК УСТАНОВЛЕН - ПОСТАВИМ |
| 020E | 80 |        |                            |  |
| 020F | 77 |        | MOV M,A                    | ЗАПЯТУЮ В ПОЗИЦИИ ПЕРВОГО СИМВОЛА |
| 0210 | E1 | DCD2:  | POP H                      |  |
| 0211 | D1 |        | POP D                      |  |
| 0212 | C1 |        | POP B                      |  |
| 0213 | F1 |        | POP PSW                    |  |
| 0214 | CD |        | CALL SDS                   | ОТОБРАЗИМ СООБЩЕНИЕ |
| 0215 | C8 |        |                            |  |
| 0216 | 01 |        |                            |  |
| 0217 | C9 |        | RET                        |  |
|      | 00 |        |                            | ТАБЛИЦА ДЕКОДИРОВАНИЯ ОТОБРАЖАЕМЫХ СИМВОЛОВ |
|      | 00 |        |                            |  |
| 0218 | 3F | DCC:   | DB 3FH                     | 0 |
| 0219 | 06 |        | DB 6H                      | 1 |
| 021A | 5B |        | DB 5BH                     | 2 |
| 021B | 4F |        | DB 4FH                     | 3 |
| 021C | 66 |        | DB 66H                     | 4 |
| 021D | 6D |        | DB 6DH                     | 5 |
| 021E | 7D |        | DB 7DH                     | 6 |
| 021F | 07 |        | DB 7H                      | 7 |
| 0220 | 7F |        | DB 7FH                     | 8 |
| 0221 | 6F |        | DB 6FH                     | 9 |
| 0222 | 77 |        | DB 77H                     | A |
| 0223 | 7C |        | DB 7CH                     | B |
| 0224 | 39 |        | DB 39H                     | C |
| 0225 | 5E |        | DB 5EH                     | D |
| 0226 | 79 |        | DB 79H                     | E |
| 0227 | 71 |        | DB 71H                     | F |
| 0228 | 00 |        | DB 0                       | ПРОБЕЛ |
| 0229 | 76 |        | DB 76H                     | H |
| 022A | 38 |        | DB 38H                     | L |
| 022B | 6E |        | DB 6EH                     | Y |
| 022C | 73 |        | DB 73H                     | Р |
| 022D | 54 |        | DB 54H                     | Л |
| 022E | 5C |        | DB 5CH                     | О |
| 022F | 08 |        | DB 8                       | _ |
| 0230 | 37 |        | DB 37H                     | П |
| 0231 | 40 |        | DB 40H                     | - |
| 0232 | FF |        | DB 0FFH                    | ВСЕ СЕГМЕНТЫ |
| 0233 | 50 |        | DB 50H                     | R |
| 0234 | 30 |        | DB 30H                     | 1 ЛЕВАЯ |
|      | 00 |        |                            |  |
|      | 00 |        |                            | КОПИРОВАНИЕ ОТОБРАЖАЕМОГО СООБЩЕНИЯ ПО DE В UDSP ОЗУ |
|      | 00 |        |                            |  |
| 0235 | 06 | SDM:   | MVI B,6                    | КОПИРУЕМ 6 СИМВОЛОВ |
| 0236 | 06 |        |                            |  |
| 0237 | 1A | SDM1:  | LDAX D                     | КОПИРУЕМ СИМВОЛ |
| 0238 | 77 |        | MOV M,A                    | ЗАПОМНИМ ЕГО В UDSPX |
| 0239 | 2C |        | INR L                      | СЛЕДУЮЩАЯ ЯЧЕЙКА UDSP |
| 023A | 14 |        | INR D                      | СЛЕДУЮЩИЙ СИМВОЛ |
| 023B | 05 |        | DCR B                      | ВСЕ СИМВОЛЫ? |
| 023C | C2 |        | JNZ SDM1                   | НЕТ, ПОВТОРИМ |
| 023D | 37 |        |                            |  |
| 023E | 02 |        |                            |  |
| 023F | C1 |        | POP B                      |  |
| 0240 | C9 |        | RET                        |  |
|      | 00 |        |                            | ТАБЛИЦА СООБЩЕНИЙ |
|      | 00 |        |                            |  |
| 0241 | 16 | DMT:   | DB 16H,15H,0AH,04H,0AH,11H | "НАЧАЛО" |
| 0242 | 15 |        |                            |  |
| 0243 | 0A |        |                            |  |
| 0244 | 04 |        |                            |  |
| 0245 | 0A |        |                            |  |
| 0246 | 11 |        |                            |  |
| 0247 | 10 | FETCH: | DB 10H,10H,17H,17H,17H,17H | "____  " |
| 0248 | 10 |        |                            |  |
| 0249 | 17 |        |                            |  |
| 024A | 17 |        |                            |  |
| 024B | 17 |        |                            |  |
| 024C | 17 |        |                            |  |
| 024D | 0A | MA:    | DB 0AH,10H,10H,10H         | "   A  " |
| 024E | 10 |        |                            |  |
| 024F | 10 |        |                            |  |
| 0250 | 10 |        |                            |  |
| 0251 | 12 | FLG:   | DB 12H,0FH,10H,10H         | "  FL  " |
| 0252 | 0F |        |                            |  |
| 0253 | 10 |        |                            |  |
| 0254 | 10 |        |                            |  |
| 0255 | 0B | MB:    | DB 0BH,10H,10H,10H         | "   B  " |
| 0256 | 10 |        |                            |  |
| 0257 | 10 |        |                            |  |
| 0258 | 10 |        |                            |  |
| 0259 | 0C | MC:    | DB 0CH,10H,10H,10H         | "   C  " |
| 025A | 10 |        |                            |  |
| 025B | 10 |        |                            |  |
| 025C | 10 |        |                            |  |
| 025D | 0D | MD:    | DB 0DH,10H,10H,10H         | "   D  " |
| 025E | 10 |        |                            |  |
| 025F | 10 |        |                            |  |
| 0260 | 10 |        |                            |  |
| 0261 | 0E | ME:    | DB 0EH,10H,10H,10H         | "   E  " |
| 0262 | 10 |        |                            |  |
| 0263 | 10 |        |                            |  |
| 0264 | 10 |        |                            |  |
| 0265 | 11 | MH:    | DB 11H,10H,10H,10H         | "   H  " |
| 0266 | 10 |        |                            |  |
| 0267 | 10 |        |                            |  |
| 0268 | 10 |        |                            |  |
| 0269 | 12 | ML:    | DB 12H,10H,10H,10H         | "   L  " |
| 026A | 10 |        |                            |  |
| 026B | 10 |        |                            |  |
| 026C | 10 |        |                            |  |
| 026D | 11 | SPH:   | DB 11H,14H,05H,10H         | " SPH  " |
| 026E | 14 |        |                            |  |
| 026F | 05 |        |                            |  |
| 0270 | 10 |        |                            |  |
| 0271 | 12 | SPL:   | DB 12H,14H,05H,10H         | " SPL  " |
| 0272 | 14 |        |                            |  |
| 0273 | 05 |        |                            |  |
| 0274 | 10 |        |                            |  |
| 0275 | 11 | PCH:   | DB 11H,0CH,14H,10H         | " PCH  " |
| 0276 | 0C |        |                            |  |
| 0277 | 14 |        |                            |  |
| 0278 | 10 |        |                            |  |
| 0279 | 12 | PCL:   | DB 12H,0CH,14H             | " PCL  " |
| 027A | 0C |        |                            |  |
| 027B | 14 |        |                            |  |
| 027C | 10 | ROM:   | DB 10H,10H,13H,03H,18H     | " ПЗУ  " |
| 027D | 10 |        |                            |  |
| 027E | 13 |        |                            |  |
| 027F | 03 |        |                            |  |
| 0280 | 18 |        |                            |  |
| 0281 | 1A | ALL:   | DB 1AH,1AH,1AH,1AH,1AH,1AH | ВСЕ СЕГМЕНТЫ |
| 0282 | 1A |        |                            |  |
| 0283 | 1A |        |                            |  |
| 0284 | 1A |        |                            |  |
| 0285 | 1A |        |                            |  |
| 0286 | 1A |        |                            |  |
| 0287 | 10 | RAM:   | DB 10H,10H,13H,03H,0,10H   | " ОЗУ  " |
| 0288 | 10 |        |                            |  |
| 0289 | 13 |        |                            |  |
| 028A | 03 |        |                            |  |
| 028B | 00 |        |                            |  |
| 028C | 10 |        |                            |  |
| 028D | 1B | PPM:   | DB 1BH,0EH,14H,05H         | " SPER " |
| 028E | 0E |        |                            |  |
| 028F | 14 |        |                            |  |
| 0290 | 05 |        |                            |  |
| 0291 | 10 | BLNKM: | DB 10H,10H,10H,10H,10H,10H | "      " |
| 0292 | 10 |        |                            |  |
| 0293 | 10 |        |                            |  |
| 0294 | 10 |        |                            |  |
| 0295 | 10 |        |                            |  |
| 0296 | 10 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОЧИСТКА ДИСПЛЕЯ |
|      | 00 |        |                            |  |
| 0297 | 11 |        | LXI D,BLNKM                | СООБЩЕНИЕ "  " |
| 0298 | 91 |        |                            |  |
| 0299 | 02 |        |                            |  |
| 029A | DF |        | RST 3                      | ЗАГРУЗИМ ЕГО |
| 029B | CD |        | CALL DCD                   | ВЫВЕДЕМ НА ДИСПЛЕЙ |
| 029C | E9 |        |                            |  |
| 029D | 01 |        |                            |  |
| 029E | C9 |        | RET                        |  |
|      | 00 |        |                            | ТАБЛИЦА ПЕРЕХОДОВ ПО УПРАВЛЯЮЩИМ КЛАВИШАМ |
|      | 00 |        |                            |  |
| 029F | FE | CHDSS: | CPI 0F7H                   | ШАГ МАШИННОГО ЦИКЛА |
| 02A0 | F7 |        |                            |  |
| 02A1 | CA |        | JZ HDSS                    |  |
| 02A2 | F7 |        |                            |  |
| 02A3 | 03 |        |                            |  |
| 02A4 | FE | CINSS: | CPI 086H                   | ШАГ КОМАНДЫ |
| 02A5 | 86 |        |                            |  |
| 02A6 | CA |        | JZ INSS                    |  |
| 02A7 | F1 |        |                            |  |
| 02A8 | 03 |        |                            |  |
| 02A9 | FE | CRUN:  | CPI 84H                    | ПУСК |
| 02AA | 84 |        |                            |  |
| 02AB | CA |        | JZ RUN                     |  |
| 02AC | C2 |        |                            |  |
| 02AD | 03 |        |                            |  |
| 02AE | FE | CSTRM: | CPI 083H                   | УВЕЛИЧИТЬ И ЗАПИСАТЬ (ПАМЯТЬ) |
| 02AF | 83 |        |                            |  |
| 02B0 | CA |        | JZ STRM                    |  |
| 02B1 | AF |        |                            |  |
| 02B2 | 03 |        |                            |  |
| 02B3 | FE | CDCRM: | CPI 81H                    | УМЕНЬШИТЬ (ПАМЯТЬ) |
| 02B4 | 81 |        |                            |  |
| 02B5 | CA |        | JZ DCRM                    |  |
| 02B6 | AA |        |                            |  |
| 02B7 | 03 |        |                            |  |
| 02B8 | FE | CFETA: | CPI 82H                    | ОТЫСКАТЬ АДРЕС |
| 02B9 | 82 |        |                            |  |
| 02BA | CA |        | JZ FETA                    |  |
| 02BB | 28 |        |                            |  |
| 02BC | 03 |        |                            |  |
| 02BD | FE | CFETB: | CPI 85H                    | ПРОГРАММНЫЙ СЧЕТЧИК |
| 02BE | 85 |        |                            |  |
| 02BF | CA |        | JZ TRP7                    |  |
| 02C0 | 41 |        |                            |  |
| 02C1 | 01 |        |                            |  |
| 02C2 | FE | CFETR: | CPI 80H                    | ОТЫСКАТЬ РЕГИСТР |
| 02C3 | 80 |        |                            |  |
| 02C4 | CA |        | JZ FETR                    |  |
| 02C5 | D5 |        |                            |  |
| 02C6 | 02 |        |                            |  |
| 02C7 | C9 |        | RET                        |  |
| 02C8 | FE | CSTRR: | CPI 83H                    | ЗАПИСАТЬ И УВЕЛИЧИТЬ (РЕГИСТР) |
| 02C9 | 83 |        |                            |  |
| 02CA | CA |        | JZ STRR                    |  |
| 02CB | 13 |        |                            |  |
| 02CC | 04 |        |                            |  |
| 02CD | FE | CDCRR: | CPI 81H                    | УМЕНЬШИТЬ (РЕГИСТР) |
| 02CE | 81 |        |                            |  |
| 02CF | CA |        | JZ DCRR                    |  |
| 02D0 | FD |        |                            |  |
| 02D1 | 03 |        |                            |  |
| 02D2 | C3 |        | JMP CFETA                  |  |
| 02D3 | B8 |        |                            |  |
| 02D4 | 02 |        |                            |  |
|      | 00 |        |                            | ОТЫСКАНИЕ РЕГИСТРА |
|      | 00 |        |                            |  |
| 02D5 | E1 | FETR:  | POP H                      | ОСВОБОДИТЬ СТЕК |
| 02D6 | 21 |        | LXI H,MA                   | СООБЩЕНИЕ "  А  " |
| 02D7 | 4D |        |                            |  |
| 02D8 | 02 |        |                            |  |
| 02D9 | 01 |        | LXI B,SAVA                 | ОБЛАСТЬ СОХРАНЕНИЯ РЕГИСТРА А |
| 02DA | E7 |        |                            |  |
| 02DB | 0B |        |                            |  |
| 02DC | 2B | FETR1: | DCX H                      | АДРЕС ДЛЯ ЗАПИСИ ДАННЫХ НА ДИСПЛЕЙ |
| 02DD | 2B |        | DCX H                      |  |
| 02DE | 22 | FETR2: | SHLD RMP                   | СОХРАНИМ УКАЗАТЕЛЬ СООБЩЕНИЯ |
| 02DF | F8 |        |                            |  |
| 02E0 | 0B |        |                            |  |
| 02E1 | EB |        | XCHG                       |  |
| 02E2 | DF |        | RST 3                      | ЗАПИСАТЬ СООБЩЕНИЕ НА ДИСПЛЕЙ |
| 02E3 | 0A |        | LDAX B                     | ПОЛУЧИТЬ СОХРАНЕННОЕ ЗНАЧЕНИЕ А |
| 02E4 | 5F |        | MOV E,A                    | РАЗДЕЛИТЬ ЕГО НА ПОЛУБАЙТЫ |
| 02E5 | 21 |        | LXI H,UDSP+1               |  |
| 02E6 | F1 |        |                            |  |
| 02E7 | 0B |        |                            |  |
| 02E8 | CD |        | CALL FETA7                 |  |
| 02E9 | 9C |        |                            |  |
| 02EA | 03 |        |                            |  |
| 02EB | CD | FETR3: | CALL KIND                  | ВВЕДЕМ КЛАВИШУ |
| 02EC | 4B |        |                            |  |
| 02ED | 01 |        |                            |  |
| 02EE | CD |        | CALL CSTRR                 | УПРАВЛЯЮЩАЯ КЛАВИША? |
| 02EF | C8 |        |                            |  |
| 02F0 | 02 |        |                            |  |
| 02F1 | D2 |        | JNC FETR3                  | ЕСЛИ НЕ УПРАВЛЯЮЩАЯ И НЕ ЦИФРА |
| 02F2 | EB |        |                            |  |
| 02F3 | 02 |        |                            |  |
| 02F4 | 5F |        | MOV E,A                    |  |
| 02F5 | 2C |        | INR L                      | HL - HA UDSP1 |
| 02F6 | 36 |        | MVI M,000H                 | ЗАПИШЕМ В НЕГО 0 |
| 02F7 | 00 |        |                            |  |
| 02F8 | 2D | FETR4: | DCR L                      | НАЗАД НА UDSP0 |
| 02F9 | 73 |        | MOV M,E                    | ЗАПОМНИМ ТАМ ВВЕДЕННУЮ ЦИФРУ |
| 02FA | CD | FETR5: | CALL DPS                   | УСТАНОВИМ УКАЗАТЕЛЬ ВВОДА - ТОЧКУ |
| 02FB | 0A |        |                            |  |
| 02FC | 03 |        |                            |  |
|      | 00 |        |                            | В МЛАДШЕМ ЗНАКЕ ДИСПЛЕЯ ВВЕДЕМ |
|      | 00 |        |                            | СЛЕДУЮЩУЮ КЛАВИШУ |
| 02FD | CD |        | CALL CSTRR                 | УПРАВЛЯЮЩАЯ КЛАВИША? |
| 02FE | C8 |        |                            |  |
| 02FF | 02 |        |                            |  |
| 0300 | D2 |        | JNC FETR5                  | ЕСЛИ НЕ УПРАВЛЯЮЩАЯ И НЕ ЦИФРА |
| 0301 | FA |        |                            |  |
| 0302 | 02 |        |                            |  |
| 0303 | 2C |        | INR L                      | СДВИНЕМ ДАННЫЕ НА ДИСПЛЕЕ ВЛЕВО |
| 0304 | 53 |        | MOV D,E                    |  |
| 0305 | 5F |        | MOV E,A                    | И |
| 0306 | 72 |        | MOV M,D                    |  |
| 0307 | C3 |        | JMP FETR4                  | ПРОДОЛЖИМ.... |
| 0308 | F8 |        |                            |  |
| 0309 | 02 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ОСТАНОВКА ДЕСЯТИЧНОЙ ТОЧКИ |
|      | 00 |        |                            |  |
| 030A | 3E | DPS:   | MVI A,1                    | ФЛАГ ВКЛЮЧЕНИЯ ДЕСЯТИЧНОЙ ТОЧКИ |
| 030B | 01 |        |                            |  |
| 030C | 32 |        | STA UDSP6                  | УСТАНОВИМ ЕГО |
| 030D | F6 |        |                            |  |
| 030E | 0B |        |                            |  |
| 030F | CD |        | CALL KIND                  | ВВЕДЕМ СЛЕДУЮЩУЮ КЛАВИШУ |
| 0310 | 4B |        |                            |  |
| 0311 | 01 |        |                            |  |
| 0312 | F5 |        | PUSH PSW                   |  |
| 0313 | AF |        | XRA A                      | СБРОСИМ ФЛАГ |
| 0314 | 32 |        | STA UDSP6                  |  |
| 0315 | F6 |        |                            |  |
| 0316 | 0B |        |                            |  |
| 0317 | F1 |        | POP PSW                    |  |
| 0318 | C9 |        | RET                        |  |
| 0319 | 00 |        | DB 0,0,0                   |  |
| 031A | 00 |        |                            |  |
| 031B | 00 |        |                            |  |
| 031C | 00 |        | DB 0,0                     |  |
| 031D | 00 |        |                            |  |
| 031E | 00 |        | DB 0,0,0                   |  |
| 031F | 00 |        |                            |  |
| 0320 | 00 |        |                            |  |
| 0321 | 00 |        | DB 0,0                     |  |
| 0322 | 00 |        |                            |  |
| 0323 | 00 |        | DB 0,0,0                   |  |
| 0324 | 00 |        |                            |  |
| 0325 | 00 |        |                            |  |
| 0326 | 00 |        | DB 0,0                     |  |
| 0327 | 00 |        |                            |  |
|      | 00 |        |                            | ОТЫСКАНИЕ АДРЕСА |
|      | 00 |        |                            |  |
| 0328 | D1 | FETA:  | POP D                      | ОСВОБОДИТЬ СТЕК |
| 0329 | 11 | FETAR: | LXI D,FETCH                | АДРЕС СООБЩЕНИЯ "____" |
| 032A | 47 |        |                            |  |
| 032B | 02 |        |                            |  |
| 032C | DF |        | RST 3                      | СКОПИРУЕМ |
| 032D | 0E |        | MVI C,4                    | НУЖНО ВВЕСТИ 4 ЦИФРЫ АДРЕСА |
| 032E | 04 |        |                            |  |
| 032F | CD | FETA1: | CALL KIND                  | ВВЕДЕМ КЛАВИШУ |
| 0330 | 4B |        |                            |  |
| 0331 | 01 |        |                            |  |
| 0332 | CD |        | CALL CFETA                 | УПРАВЛЯЮЩАЯ? |
| 0333 | B8 |        |                            |  |
| 0334 | 02 |        |                            |  |
| 0335 | D2 |        | JNC FETA1                  |  |
| 0336 | 2F |        |                            |  |
| 0337 | 03 |        |                            |  |
| 0338 | 21 |        | LXI H,UDSP6                |  |
| 0339 | F6 |        |                            |  |
| 033A | 0B |        |                            |  |
| 033B | 06 |        | MVI B,004H                 | СДВИГАЕМ АДРЕС НА ДИСПЛЕЕ ВЛЕВО |
| 033C | 04 |        |                            |  |
| 033D | 2D | FETA2: | DCR L                      |  |
| 033E | 2D |        | DCR L                      |  |
| 033F | 56 |        | MOV D,M                    |  |
| 0340 | 2C |        | INR L                      |  |
| 0341 | 72 |        | MOV M,D                    |  |
| 0342 | 05 |        | DCR B                      |  |
| 0343 | C2 |        | JNZ FETA2                  |  |
| 0344 | 3D |        |                            |  |
| 0345 | 03 |        |                            |  |
| 0346 | 77 |        | MOV M,A                    | ПОСЛЕДНЯЯ ЦИФРА - МЛАДШИЙ ЗНАК |
| 0347 | 0D |        | DCR C                      | КОНТРОЛЬ НА ВВОД ВСЕХ ЦИФР |
| 0348 | C2 |        | JNZ FETA1                  |  |
| 0349 | 2F |        |                            |  |
| 034A | 03 |        |                            |  |
| 034B | CD |        | CALL FETA6                 | УПАКУЕМ ПОЛУЧЕННЫЙ АДРЕС В BC |
| 034C | 93 |        |                            |  |
| 034D | 03 |        |                            |  |
| 034E | 4F |        | MOV C,A                    |  |
| 034F | 2C |        | INR L                      |  |
| 0350 | CD |        | CALL FETA6                 |  |
| 0351 | 93 |        |                            |  |
| 0352 | 03 |        |                            |  |
| 0353 | 47 |        | MOV B,A                    |  |
| 0354 | 21 | FETA3: | LXI H,UDSP+5               | РАСПАКУЕМ АДРЕС ИЗ BC И ЗАПИШЕМ |
| 0355 | F5 |        |                            |  |
| 0356 | 0B |        |                            |  |
| 0357 | 58 |        | MOV E,B                    |  |
| 0358 | CD |        | CALL FETA7                 |  |
| 0359 | 9C |        |                            |  |
| 035A | 03 |        |                            |  |
| 035B | 2D |        | DCR L                      |  |
| 035C | 59 |        | MOV E,C                    |  |
| 035D | CD |        | CALL FETA7                 |  |
| 035E | 9C |        |                            |  |
| 035F | 03 |        |                            |  |
| 0360 | 2D |        | DCR L                      |  |
| 0361 | 0A |        | LDAX B                     | ПОЛУЧИМ ДАННЫЕ ИЗ УКАЗАННОГО АДРЕСА |
| 0362 | 5F |        | MOV E,A                    | РАСПАКУЕМ ИХ И ЗАПИШЕМ НА ДИСПЛЕЙ |
| 0363 | CD |        | CALL FETA7                 |  |
| 0364 | 9C |        |                            |  |
| 0365 | 03 |        |                            |  |
|      | 00 |        |                            | ИЗМЕНЕНИЕ ДАННЫХ |
|      | 00 |        |                            |  |
| 0366 | CD |        | CALL KIND                  | ВЫВЕЛИ СООБЩЕНИЕ И ЖДЕМ ВВОДА |
| 0367 | 4B |        |                            |  |
| 0368 | 01 |        |                            |  |
| 0369 | CD |        | CALL CHDSS                 | НЕ ВЕРНЕМСЯ, ЕСЛИ ОНА УПРАВЛЯЮЩАЯ |
| 036A | 9F |        |                            |  |
| 036B | 02 |        |                            |  |
| 036C | 5F |        | MOV E,A                    | ДАВННЫЕ ЗАПИШЕМ В E |
| 036D | 77 |        | MOV M,A                    | И В UDSP0 |
| 036E | 2C |        | INR L                      |  |
| 036F | 36 |        | MVI M,0                    | В UDSP1 ЗАПИШЕМ 0 |
| 0370 | 00 |        |                            |  |
| 0371 | 2D | FETA4: | DCR L                      |  |
| 0372 | 73 |        | MOV M,E                    | ВВЕДЕННУЮ ЦИФРУ - В UDSP0 |
| 0373 | CD | FETA5: | CALL DPS                   | ВКЛЮЧАЕМ ТОЧКУ И ВВОДИМ КЛАВИШУ |
| 0374 | 0A |        |                            |  |
| 0375 | 03 |        |                            |  |
| 0376 | CD |        | CALL CSTRM                 | УПРАВЛЯЮЩАЯ? |
| 0377 | AE |        |                            |  |
| 0378 | 02 |        |                            |  |
| 0379 | D2 |        | JNC FETA5                  |  |
| 037A | 73 |        |                            |  |
| 037B | 03 |        |                            |  |
| 037C | 2C |        | INR L                      | СДВИГАЕМ ДАННЫЕ НА ДИСПЛЕЕ |
| 037D | 53 |        | MOV D,E                    |  |
| 037E | 5F |        | MOV E,A                    |  |
| 037F | 72 |        | MOV M,D                    |  |
| 0380 | C3 |        | JMP FETA4                  | ПРОДОЛЖАЕМ ВВОД |
| 0381 | 71 |        |                            |  |
| 0382 | 03 |        |                            |  |
| 0383 | 00 |        | DB 0,0,0                   |  |
| 0384 | 00 |        |                            |  |
| 0385 | 00 |        |                            |  |
| 0386 | 00 |        | DB 0,0                     |  |
| 0387 | 00 |        |                            |  |
| 0388 | 00 |        | DB 0,0,0                   |  |
| 0389 | 00 |        |                            |  |
| 038A | 00 |        |                            |  |
| 038B | 00 |        | DB 0,0                     |  |
| 038C | 00 |        |                            |  |
| 038D | 00 |        | DB 0,0,0                   |  |
| 038E | 00 |        |                            |  |
| 038F | 00 |        |                            |  |
| 0390 | 00 |        | DB 0,0,0                   |  |
| 0391 | 00 |        |                            |  |
| 0392 | 00 |        |                            |  |
|      | 00 |        |                            | УПАКОВКА ДВУХ ШЕСТНАДЦАТИРИЧНЫХ ЧИСЕЛ В РЕГИСТРЕ А |
|      | 00 |        |                            |  |
| 0393 | 5E | FETA6: | MOV E,M                    | МЛАДШАЯ ШЕСТНАДЦАТИРИЧНАЯ ЦИФРА |
| 0394 | 23 |        | INX H                      |  |
| 0395 | 7E |        | MOV A,M                    | СТАРШАЯ |
| 0396 | 07 |        | RLC                        |  |
| 0397 | 07 |        | RLC                        |  |
| 0398 | 07 |        | RLC                        |  |
| 0399 | 07 |        | RLC                        |  |
| 039A | B3 |        | ORA E                      | УПАКУЕМ В РЕГИСТРЕ А |
| 039B | C9 |        | RET                        |  |
|      | 00 |        |                            | РАСПАКОВКА ШЕСТНАДЦАТИРИЧНОГО ЧИСЛА ИЗ РЕГИСТРА Е |
|      | 00 |        |                            |  |
| 039C | 7B | FETA7: | MOV A,E                    | ВЫДЕЛЯЕМ МЛАДШУЮ ЦИФРУ |
| 039D | 0F |        | RRC                        |  |
| 039E | 0F |        | RRC                        |  |
| 039F | 0F |        | RRC                        |  |
| 03A0 | 0F |        | RRC                        |  |
| 03A1 | 16 |        | MVI D,0FH                  |  |
| 03A2 | 0F |        |                            |  |
| 03A3 | A2 |        | ANA D                      |  |
| 03A4 | 77 |        | MOV M,A                    | ЗАПИСАЛИ |
| 03A5 | 2D |        | DCR L                      |  |
| 03A6 | 7B |        | MOV A,E                    | ВЫДЕЛЯЕМ СТАРШУЮ ЦИФРУ |
| 03A7 | A2 |        | ANA D                      |  |
| 03A8 | 77 |        | MOV M,A                    | ЗАПИСАЛИ |
| 03A9 | C9 |        | RET                        |  |
|      | 00 |        |                            | УМЕНЬШЕНИЕ АДРЕСА ПАМЯТИ |
|      | 00 |        |                            |  |
| 03AA | 0B | DCRM:  | DCX B                      | УМЕНЬШИТЬ АДРЕС |
| 03AB | E1 |        | POP H                      |  |
| 03AC | C3 |        | JMP FETA3                  | ОТОБРАЗИТЬ ЕГО С СОДЕРЖИМЫМ |
| 03AD | 54 |        |                            |  |
| 03AE | 03 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ЗАПИСЬ ДАННЫХ В ПАМЯТЬ И УВЕЛИЧЕНИЕ АДРЕСА |
|      | 00 |        |                            |  |
| 03AF | D1 | STRM:  | POP D                      | ОСВОБОДИТЬ СТЕК |
| 03B0 | CD |        | CALL FETA6                 | УПАКУЕМ ДАННЫЕ С ДИСПЛЕЯ |
| 03B1 | 93 |        |                            |  |
| 03B2 | 03 |        |                            |  |
| 03B3 | 5F |        | MOV E,A                    |  |
| 03B4 | 02 |        | STAX B                     | ЗАПИШЕМ И |
| 03B5 | 0A |        | LDAX B                     | ПРОВЕРИМ КАК ЗАПИСАЛОСЬ |
| 03B6 | BB |        | CMP E                      |  |
| 03B7 | 03 |        | INX B                      | УКАЖЕМ НА СЛЕДУЮЩИЙ АДРЕС |
| 03B8 | CA |        | JZ FETA3                   | НОРМАЛЬНО - ОТОБРАЗИМ СЛЕДУЮЩИЙ |
| 03B9 | 54 |        |                            |  |
| 03BA | 03 |        |                            |  |
| 03BB | 0B |        | DCX B                      | ЕСЛИ НЕТ - ВОССТАНОВИМ АДРЕС, |
| 03BC | C5 |        | PUSH B                     |  |
| 03BD | D7 |        | RST 2                      | ПОПИЩИМ И |
| 03BE | C1 |        | POP B                      |  |
| 03BF | C3 |        | JMP FETA3                  | ОТОБРАЗИМ ЕГО С СОДЕРЖИМЫМ |
| 03C0 | 54 |        |                            |  |
| 03C1 | 03 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ЗАПУСК ПРОГРАММЫ ПО АДРЕСУ НА ДИСПЛЕЕ |
|      | 00 |        |                            |  |
| 03C2 | 21 | RUN:   | LXI H,9D3H                 | КОМАНДА КВЛЮЧЕНИЯ ЗАЩТЬЫ ОЗУ |
| 03C3 | D3 |        |                            |  |
| 03C4 | 09 |        |                            |  |
| 03C5 | 22 | RUN1:  | SHLD RAML1                 | ЗАПИШЕМ ЕЕ |
| 03C6 | D5 |        |                            |  |
| 03C7 | 0B |        |                            |  |
| 03C8 | 21 |        | LXI H,0C300H               | КОМАНДА ПЕРЕХОДА НА ПРОГРАММУ |
| 03C9 | 00 |        |                            |  |
| 03CA | C3 |        |                            |  |
| 03CB | 22 |        | SHLD RAML2                 | ПОЛЬЗОВАТЕЛЯ (JMP USER) |
| 03CC | D7 |        |                            |  |
| 03CD | 0B |        |                            |  |
| 03CE | 31 |        | LXI SP,SAVRG               | АДРЕС ПРОГРАММЫ ПОЛЬЗОВАТЕЛЯ |
| 03CF | DB |        |                            |  |
| 03D0 | 0B |        |                            |  |
| 03D1 | C5 |        | PUSH B                     |  |
| 03D2 | 21 |        | LXI H,SAVSH                | ВОССТАНОВИМ СТАРШИЙ БАЙТ SP |
| 03D3 | DF |        |                            |  |
| 03D4 | 0B |        |                            |  |
| 03D5 | 36 |        | MVI M,0BH                  | ПОЛЬЗОВАТЕЛЯ |
| 03D6 | 0B |        |                            |  |
| 03D7 | 2B |        | DCX H                      |  |
| 03D8 | 7E |        | MOV A,M                    |  |
| 03D9 | FE |        | CPI 40H                    | ПРОВЕРИМ НЕ ВЫШЕЛ ЛИ ОН ЗА |
| 03DA | 40 |        |                            |  |
|      | 00 |        |                            | ГРАНИЦУ ОТВЕДЕННОЙ ОБЛАСТИ |
| 03DB | D2 |        | JNC RUN2                   | ЕСЛИ НЕТ |
| 03DC | E0 |        |                            |  |
| 03DD | 03 |        |                            |  |
| 03DE | 36 |        | MVI M,0B0H                 | ИНАЧЕ УСТАНОВИМ ЕГО ЗАНОВО |
| 03DF | B0 |        |                            |  |
| 03E0 | 31 | RUN2:  | LXI SP,SAVE                | ЗАГРУЗИМ РЕГИСТРЫ ПОЛЬЗОВАТЕЛЯ |
| 03E1 | E2 |        |                            |  |
| 03E2 | 0B |        |                            |  |
| 03E3 | D1 |        | POP D                      |  |
| 03E4 | C1 |        | POP B                      |  |
| 03E5 | F1 |        | POP PSW                    |  |
| 03E6 | 31 |        | LXI SP,SAVSL               | ВОССТАНОВИМ МЛАДШИЙ БАЙТ SP |
| 03E7 | DE |        |                            |  |
| 03E8 | 0B |        |                            |  |
| 03E9 | E1 |        | POP H                      | ПОЛЬЗОВАТЕЛЯ |
| 03EA | F9 |        | SPHL                       | ПЕРЕЗАГРУЗИМ SP |
| 03EB | 2A |        | LHLD SAVL                  |  |
| 03EC | E0 |        |                            |  |
| 03ED | 0B |        |                            |  |
| 03EE | C3 |        | JMP RAML1                  | ЗАПУСК ПРОГРАММЫ ПОЛЬЗОВАТЕЛЯ |
| 03EF | D5 |        |                            |  |
| 03F0 | 0B |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ШАГ КОМАНДЫ |
|      | 00 |        |                            |  |
| 03F1 | 21 | INSS:  | LXI H,0ED3H                | ВКЛЮЧЕНИЕ ЗАЩИТЫ ОЗУ И ПРИЗНАКА |
| 03F2 | D3 |        |                            |  |
| 03F3 | 0E |        |                            |  |
|      | 00 |        |                            | ШАГ КОМАНДЫ |
| 03F4 | C3 |        | JMP RUN1                   | ЗВГРУЗКА РЕГИСТРОВ И ПУСК |
| 03F5 | C5 |        |                            |  |
| 03F6 | 03 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ШАГ ЦИКЛА |
|      | 00 |        |                            |  |
| 03F7 | 21 | HDSS:  | LXI H,TSAVH                | ВКЛЮЧЕНИЕ ЗАЩИТЫ ОЗУ И ПРИЗНАКА |
| 03F8 | D3 |        |                            |  |
| 03F9 | 0B |        |                            |  |
|      | 00 |        |                            | ШАГ ЦИКЛА |
| 03FA | C3 |        | JMP RUN1                   | ЗВГРУЗКА РЕГИСТРОВ И ПУСК |
| 03FB | C5 |        |                            |  |
| 03FC | 03 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | УМЕНЬШЕНИЕ НОМЕРА ОТОБРАЖАЕМОГО РЕГИСТРА |
|      | 00 |        |                            |  |
| 03FD | D1 | DCRR:  | POP D                      | ОСВОБОДИТЬ СТЕК |
| 03FE | 03 |        | INX B                      | УКАЗАТЕЛЬ - НА ОБЛАСТЬ СЛЕДУЮЩЕГО РГ |
| 03FF | 2A |        | LHLD RMP                   | УКАЗАТЕЛЬ СООБЩЕНИЯ О ТЕКУЩЕМ РГ |
| 0400 | F8 |        |                            |  |
| 0401 | 0B |        |                            |  |
| 0402 | 2B |        | DCX H                      |  |
| 0403 | 2B |        | DCX H                      |  |
| 0404 | 3E |        | MVI A,0E8H                 | ПОСМОТРЕЛИ ВСЕ РЕГИСТРЫ? |
| 0405 | E8 |        |                            |  |
| 0406 | B9 |        | CMP C                      |  |
| 0407 | C2 |        | JNZ FETR1                  | НЕТ |
| 0408 | DC |        |                            |  |
| 0409 | 02 |        |                            |  |
| 040A | 01 |        | LXI B,SAVPC                | ДА, НАЧНЕМ СНАЧАЛА |
| 040B | DC |        |                            |  |
| 040C | 0B |        |                            |  |
| 040D | 21 |        | LXI H,PCL                  |  |
| 040E | 79 |        |                            |  |
| 040F | 02 |        |                            |  |
| 0410 | C3 |        | JMP FETR1                  |  |
| 0411 | DC |        |                            |  |
| 0412 | 02 |        |                            |  |
|      | 00 |        |                            | ЗАПИСЬ ДАННЫХ В РЕГИСТР И УВЕЛИЧЕНИЕ ЕГО НОМЕРА |
|      | 00 |        |                            |  |
| 0413 | D1 | STRR:  | POP D                      | ОСВОБОДИТЬ СТЕК |
| 0414 | CD |        | CALL FETA6                 | УПАКУЕМ ДАННЫЕ С ДИСПЛЕЯ |
| 0415 | 93 |        |                            |  |
| 0416 | 03 |        |                            |  |
| 0417 | 02 |        | STAX B                     | ЗАПОМНИМ |
| 0418 | 0B |        | DCX B                      | УКАЗАТЕЛЬ - НА ОБЛАСТЬ СЛЕДУЮЩЕГО РГ |
| 0419 | 2A |        | LHLD RMP                   | УКАЗАТЕЛЬ СООБЩЕНИЯ В ТЕКУЩЕМ РГ |
| 041A | F8 |        |                            |  |
| 041B | 0B |        |                            |  |
| 041C | 23 |        | INX H                      |  |
| 041D | 23 |        | INX H                      |  |
| 041E | 23 |        | INX H                      |  |
| 041F | 23 |        | INX H                      |  |
| 0420 | 3E |        | MVI A,0DBH                 | ПОСМОТРЕЛИ ВСЕ РЕГИСТРЫ? |
| 0421 | DB |        |                            |  |
| 0422 | B9 |        | CMP C                      |  |
| 0423 | CA |        | JZ FETR                    | ДА |
| 0424 | D5 |        |                            |  |
| 0425 | 02 |        |                            |  |
| 0426 | C3 |        | JMP FETR2                  | НЕТ |
| 0427 | DE |        |                            |  |
| 0428 | 02 |        |                            |  |
|      | 00 |        |                            |  |
|      | 00 |        |                            | ЗАДЕРЖКА ПРИМЕРНО НА 1 МС |
|      | 00 |        |                            |  |
| 0429 | C5 | DELA:  | PUSH B                     |  |
| 042A | 01 |        | LXI B,1                    | ФИКСИРОВАННОЕ ЗНАЧЕНИЕ 1 МС |
| 042B | 01 |        |                            |  |
| 042C | 00 |        |                            |  |
| 042D | C3 |        | JMP DEL1                   |  |
| 042E | 31 |        |                            |  |
| 042F | 04 |        |                            |  |
|      | 00 |        |                            | ЗАДЕРЖКА С ДЛИТЕЛЬНОСТЬЮ, ЗАДАВАЕМОЙ BC В МС |
|      | 00 |        |                            |  |
| 0430 | C5 | DELB:  | PUSH B                     |  |
| 0431 | F5 | DEL1:  | PUSH PSW                   |  |
| 0432 | AF |        | XRA A                      |  |
| 0433 | D5 |        | PUSH D                     |  |
| 0434 | 16 | DEL2:  | MVI D,TIME                 | ЦИКЛ ЗАДЕРЖКИ В 1 МС |
| 0435 | 67 |        |                            |  |
| 0436 | 15 | DEL3:  | DCR D                      | СЧЕТЧИК ЭТОГО ЦИКЛА |
| 0437 | C2 |        | JNZ DEL3                   |  |
| 0438 | 36 |        |                            |  |
| 0439 | 04 |        |                            |  |
| 043A | 0B |        | DCX B                      | СЧЕТЧИК КОЛИЧЕСТВА МС |
| 043B | B8 |        | CMP B                      |  |
| 043C | C2 |        | JNZ DEL2                   |  |
| 043D | 34 |        |                            |  |
| 043E | 04 |        |                            |  |
| 043F | B9 |        | CMP C                      |  |
| 0440 | C2 |        | JNZ DEL2                   | ЕЩЕ НЕ КОНЧИЛИ |
| 0441 | 34 |        |                            |  |
| 0442 | 04 |        |                            |  |
| 0443 | D1 |        | POP D                      |  |
| 0444 | F1 |        | POP PSW                    |  |
| 0445 | C1 |        | POP B                      |  |
| 0446 | C9 |        | RET                        |  |
|      | 00 |        |                            | ГЕНЕРАЦИЯ ЗВУКОВОГО СИГНАЛА |
|      | 00 |        |                            |  |
| 0447 | 2E | BEEP2: | MVI L,0FFH                 | МНОЖИТЕЛЬ ДЛИТЕЛЬНОСТИ |
| 0448 | FF |        |                            |  |
| 0449 | 26 |        | MVI H,0                    | ВЫХОДНОЙ ФЛАГ |
| 044A | 00 |        |                            |  |
| 044B | 48 |        | MOV C,B                    | СЧЕТЧИК ЧАСТОТЫ |
| 044C | 5A |        | MOV E,D                    | СЧЕТЧИК ДЛИТЕЛЬНОСТИ |
| 044D | E5 |        | PUSH H                     |  |
| 044E | 0D | BEEP3: | DCR C                      |  |
| 044F | C2 |        | JNZ BEEP6                  | ЗАДЕРЖКА НА ПОЛПЕРИОДА ЧАСТОТЫ |
| 0450 | 70 |        |                            |  |
| 0451 | 04 |        |                            |  |
| 0452 | 48 |        | MOV C,B                    | ВОССТАНАВЛИВАЕМ СЧЕТЧИК ЧАСТОТЫ |
| 0453 | 7C |        | MOV A,H                    | ИНВЕРТИРУЕМ ВЫХОДНОЙ ФЛАГ |
| 0454 | 2F |        | CMA                        |  |
| 0455 | B7 |        | ORA A                      |  |
| 0456 | 67 |        | MOV H,A                    |  |
| 0457 | C2 |        | JNZ BEEP4                  | ПРОВЕРКА ВЫХОДНОГО ФЛАГА |
| 0458 | 60 |        |                            |  |
| 0459 | 04 |        |                            |  |
| 045A | AF |        | XRA A                      |  |
| 045B | D3 |        | OUT OTR                    | ВЫКЛЮЧИЛИ ВЫХОД |
| 045C | 04 |        |                            |  |
| 045D | C3 |        | JMP BEEP5                  |  |
| 045E | 65 |        |                            |  |
| 045F | 04 |        |                            |  |
| 0460 | 3E | BEEP4: | MVI A,0FFH                 | ВКЛЮЧИМ ВХОД |
| 0461 | FF |        |                            |  |
| 0462 | D3 |        | OUT OTR                    |  |
| 0463 | 04 |        |                            |  |
| 0464 | BE |        | CMP M                      |  |
| 0465 | F1 | BEEP5: | POP PSW                    |  |
| 0466 | F5 |        | PUSH PSW                   |  |
| 0467 | B7 |        | ORA A                      |  |
| 0468 | CA |        | JZ BEEP6                   | ПРОДОЛЖАЕМ, ЕСЛИ НЕ ЗАКОНЧИЛИ |
| 0469 | 70 |        |                            |  |
| 046A | 04 |        |                            |  |
| 046B | 7C |        | MOV A,H                    | ВОЗВРАЩАЕМСЯ, ЕСЛИ ВЫХОД ВЫКЛЮЧЕН |
| 046C | B7 |        | ORA A                      |  |
| 046D | CA |        | JZ BEEP7                   |  |
| 046E | 7F |        |                            |  |
| 046F | 04 |        |                            |  |
| 0470 | 1D | BEEP6: | DCR E                      | СЧЕТЧИК ДЛИТЕЛЬНОСТИ |
| 0471 | C2 |        | JNZ BEEP3                  |  |
| 0472 | 4E |        |                            |  |
| 0473 | 04 |        |                            |  |
| 0474 | 5A |        | MOV E,D                    | ВОССТАНАВЛИВАЕМ ЕГО |
| 0475 | 2D |        | DCR L                      |  |
| 0476 | C2 |        | JNZ BEEP3                  |  |
| 0477 | 4E |        |                            |  |
| 0478 | 04 |        |                            |  |
| 0479 | F1 |        | POP PSW                    |  |
| 047A | 2F |        | CMA                        |  |
| 047B | F5 |        | PUSH PSW                   |  |
| 047C | C3 |        | JMP BEEP3                  |  |
| 047D | 4E |        |                            |  |
| 047E | 04 |        |                            |  |
| 047F | F1 | BEEP7: | POP PSW                    |  |
| 0480 | C9 |        | RET                        |  |
